---
  - name: Initial setup
    hosts: all
    roles:
      - init
    tags:
      - init

  - name: Bind9
    hosts: dns_servers
    roles:
      - bind
    tags: bind

  - name: dns
    hosts: all
    roles:
      - dns 
    tags: dns

      
  - name: Database server
    hosts: db_servers
    roles:
     - mysql
     
  
  - name: Web_servers
    hosts: web_servers
    roles:
     - agama
     - uwsgi
        
  - name: Nginx
    hosts: all
    roles:
      - nginx
    tags: prometheus

  - name: Prometheus
    hosts: prometheus_servers
    roles:
      - prometheus
    tags: prometheus
      

  
  
  - name: Influxdb
    hosts: influxdb_servers
    become: yes
    roles:  
      - influxdb
    tags:
      - in
  
  - name: docker
    hosts: docker_servers
    roles: 
      - docker
    tags: 
      - docker


  - name: Grafana 
    hosts: grafana_servers
    roles:
      - grafana
    tags: grafana


  
  - name: Agama client
    hosts: agama_client_servers
    roles:
      - role: agama_client
    tags: agc
      

